<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Film Reel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/svg" href="images/icon.svg" />
  </head>

  <body>
    <div id="header">
    	<img src="images/icon.svg" alt="Film Reel Logo" id="header-logo" />
    	<a href="https://github.com/kirpal/filmreel" class="header-links"><img src="images/github.png" alt="Github"></a>
    	<a href="#downloads" class="header-links">Downloads</a>
    	<a href="#features" class="header-links">Features</a>
    </div>
    <div id="hero">
      <div id="hero-content">
        <h1 id="hero-title">Film Reel</h1>
        <h2 id="hero-description">Download or stream 1000's of movies with Film Reel. </h2>
        <a href="https://github.com/kirpal/filmreel/releases/latest" id="hero-download">Download</a><br>
        <p class="hero-platforms" id="current-platform"></p><a href="#downloads" class="hero-platforms">More Platforms</a>
      </div>
    </div>
    <div id="features">
      <div id="hero-screenshot">
        <img src="images/screenshot.png" alt="Film Reel Screenshot">
      </div>
      <a name="features"></a>
      <h1>Features</h1>
      <div id="features-grouper">
        <div class="feature">
          <img src="images/download.svg" alt="Download Icon">
          <h2>Download or Stream</h2>
          <p>You can stream movies to watch them instantly, or download them to watch offline anytime you want</p>
        </div>
        <div class="feature">
          <img src="images/hourglass.svg" alt="Lightning Icon">
          <h2>Lightning Fast</h2>
          <p>Using peer-to-peer technology, the videos are loaded in pieces. This means that they load and play faster with no quality drop.</p>
        </div>
        <div class="feature">
          <img src="images/film.svg" alt="Movie Icon">
          <h2>Thousands of Movies</h2>
          <p>There are thousands of movies available to watch, with more being added each and every day.</p>
        </div>
        <div class="feature">
          <img src="images/heart.svg" alt="Infinity Icon">
          <h2>Free and Unlimited</h2>
          <p>There's no limit to the number of movies you can watch or download, all for free.</p>
        </div>
        <!--<div class="feature">
          <img src="images/smartphone.svg" alt="Phone Icon">
          <h2>Remote App</h2>
          <p>Control playback and start downloads using the free mobile Film Reel app.</p>
        </div>
        <div class="feature">
          <img src="images/users.svg" alt="People Icon">
          <h2>Open Source</h2>
          <p>Film Reel is totally open source. If you want to help with the development, check out the <a href="https://github.com/kirpal/filmreel">GitHub</a></p>
        </div> -->
        <div class="feature">
          <img src="images/picture.svg" alt="HD Player Icon">
          <h2>HD Player</h2>
          <p>Use the player to watch any available movie at it's full HD resolution.</p>
        </div>
        <div class="feature">
          <img src="images/screen.svg" alt="Computer Icon">
          <h2>Cross Platform</h2>
          <p>Film Reel is compatible with MacOS, Windows, and Linux.</p>
        </div>
      </div>
    </div>
    <div id="downloads">
      <a name="downloads"></a>
      <h1>Downloads</h1>
      <div id="version-selector">
        <select id="version-selector-select">
        </select>
      </div>
      <br>
      <noscript>
        You need JavaScript enabled to download from here. Please get the latest version on <a href="https://github.com/kirpal/filmreel/releases/latest">GitHub</a>.
      </noscript>
      <div class="platform">
        <img src="images/windows.png" alt="Windows Logo">
        <h2>Windows</h2>
        <h3>(Windows 7+)</h3>
        <a href="" name="Windows">Download</a>
      </div>
      <br>
      <div class="platform">
        <img src="images/mac.png" alt="Mac Logo">
        <h2>Mac</h2>
        <h3>(macOS 10.9+)</h3>
        <a href="" name="Mac">Download</a>
      </div>
      <br>
      <div class="platform">
        <img src="images/linux.png" alt="Linux Logo">
        <h2>Linux (.deb)</h2>
        <h3>(Ubuntu LTS 12.04+, Debian 8+)</h3>
        <a href="" name="Linux (.deb)">Download</a>
      </div>
      <br>
      <div class="platform">
        <img src="images/linux.png" alt="Linux Logo">
        <h2>Linux (Gzip)</h2>
        <h3>(Ubuntu LTS 12.04+, Debian 8+)</h3>
        <a href="" name="Linux (Gzip)">Download</a>
      </div>
    </div>
    <div id="footer">
      <svg viewBox="0 0 1024 1024"><path class="path1" d="M256 768c-6.552 0-13.102-2.499-18.101-7.499l-204.8-204.8c-9.998-9.997-9.998-26.206 0-36.203l204.8-204.8c9.997-9.997 26.206-9.997 36.203 0 9.998 9.997 9.998 26.206 0 36.203l-186.699 186.699 186.698 186.699c9.998 9.997 9.998 26.206 0 36.203-4.998 4.998-11.549 7.498-18.101 7.498z"></path><path class="path2" d="M768 768c-6.552 0-13.102-2.499-18.101-7.499-9.998-9.997-9.998-26.206 0-36.203l186.698-186.698-186.698-186.699c-9.998-9.997-9.998-26.206 0-36.203 9.997-9.997 26.206-9.997 36.203 0l204.8 204.8c9.998 9.997 9.998 26.206 0 36.203l-204.8 204.8c-5 5-11.55 7.499-18.102 7.499z"></path><path class="path3" d="M383.976 768.003c-4.634 0-9.325-1.258-13.544-3.894-11.989-7.494-15.634-23.288-8.141-35.278l256-409.6c7.493-11.984 23.283-15.634 35.278-8.141 11.989 7.494 15.634 23.288 8.141 35.278l-256 409.6c-4.858 7.77-13.202 12.035-21.734 12.035z"></path></svg>
      with
      <svg viewBox="-10 0 1024 1024"><path class="path1" d="M486.4 972.8c-4.283 0-8.566-1.074-12.434-3.222-4.808-2.67-119.088-66.624-235.122-171.376-68.643-61.97-123.467-125.363-162.944-188.418-50.365-80.443-75.901-160.715-75.901-238.584 0-148.218 120.582-268.8 268.8-268.8 50.173 0 103.462 18.805 150.051 52.952 27.251 19.973 50.442 44.043 67.549 69.606 17.107-25.565 40.299-49.634 67.55-69.606 46.589-34.147 99.878-52.952 150.050-52.952 148.218 0 268.8 120.582 268.8 268.8 0 77.869-25.538 158.141-75.901 238.584-39.478 63.054-94.301 126.446-162.944 188.418-116.034 104.754-230.314 168.706-235.122 171.376-3.867 2.149-8.15 3.222-12.434 3.222zM268.8 153.6c-119.986 0-217.6 97.614-217.6 217.6 0 155.624 120.302 297.077 221.224 388.338 90.131 81.504 181.44 138.658 213.976 158.042 32.536-19.384 123.845-76.538 213.976-158.042 100.922-91.261 221.224-232.714 221.224-388.338 0-119.986-97.616-217.6-217.6-217.6-87.187 0-171.856 71.725-193.314 136.096-3.485 10.453-13.267 17.504-24.286 17.504s-20.802-7.051-24.286-17.504c-21.456-64.371-106.125-136.096-193.314-136.096z"></path></svg>
      by <a href="https://kirp.al">Kirpal Demian</a>
      <br>
      <br>
      <a href="https://linearicons.com">Icons</a> | <a href="https://github.com/kirpal/filmreel">GitHub</a> | <a href="https://raw.githubusercontent.com/Kirpal/filmreel/master/LICENSE">License</a>
    </div>
    <script src="https://cdn.rawgit.com/github/fetch/master/fetch.js"></script>
    <script>
      fetch("https://api.github.com/repos/Kirpal/filmreel/releases", {method: "GET"}).then(function (response){
        return response.json();
      })
      .then(function (body){
        var stable = body.filter(function(elm){return !elm.prerelease});

        function findAsset(platform, assetList){
          var platformIdentifiers = [];
          if(platform === "Windows"){
            platformIdentifiers = ["exe"];
          }else if(platform === "Mac"){
            platformIdentifiers = ["dmg"];
          }else if(platform === "Linux (.deb)"){
            platformIdentifiers = ["deb"];
          }else if(platform === "Linux (Gzip)"){
            platformIdentifiers = ["tar", "gz"];
          }
          var filteredAssets = assetList.filter(function(asset){
            var matches = 0;
            for(var i = 0; i < platformIdentifiers.length; i++){
              if(asset.name.includes(platformIdentifiers[i])){
                matches += 1;
              }
            }
            return matches === platformIdentifiers.length;
          })
          return filteredAssets;
        }

        var platformName = "Windows";
        if(navigator.platform.includes("Linux")){
          document.getElementById("current-platform").innerHTML = stable[0].tag_name + "&nbsp;&nbsp;-&nbsp;&nbsp;Linux (.deb)&nbsp;&nbsp;-&nbsp;";
          platformName = "Linux (.deb)";
        }else if(navigator.platform.includes("Mac")){
          document.getElementById("current-platform").innerHTML = stable[0].tag_name + "&nbsp;&nbsp;-&nbsp;&nbsp;MacOS&nbsp;&nbsp;-&nbsp;";
          platformName = "Mac";
        }else{
          document.getElementById("current-platform").innerHTML = stable[0].tag_name + "&nbsp;&nbsp;-&nbsp;&nbsp;Windows&nbsp;&nbsp;-&nbsp;";
        }

        var filteredAssets = findAsset(platformName, stable[0].assets);
        if(filteredAssets.length >= 1){
          document.getElementById("hero-download").href = filteredAssets[0].browser_download_url;
        }else{
          document.getElementById("hero-download").href = "#downloads";
          document.getElementById("current-platform").innerHTML = stable[0].tag_name + "&nbsp;&nbsp;-&nbsp;&nbsp;Platform Unavailable&nbsp;&nbsp;-&nbsp;";
        }

        var select = document.getElementById("version-selector-select");
        var selectContainer = document.getElementById("version-selector");
        for(var i = 0; i < stable.length; i++){
          var option = document.createElement("option");
          option.text = stable[i].tag_name;
          option.value = i;
          select.add(option)
        }
        if(stable.length > 1){
          selectContainer.style.display = "inline-block";
        }else{
          selectContainer.style.display = "none";
        }
        function updateLinks(version){
          var versionAssets = stable[version].assets;
          var downloads = document.getElementsByClassName("platform");
          for(var i = 0; i < downloads.length; i++){
            for(var j = 0; j < downloads[i].children.length; j++){
              if(downloads[i].children[j].nodeName === "A"){
                var filteredAssets = findAsset(downloads[i].children[j].name, versionAssets);
                if(filteredAssets.length >= 1){
                  downloads[i].style.display = "inline-block";
                  downloads[i].children[j].href = filteredAssets[0].browser_download_url;
                }else{
                  downloads[i].style.display = "none";
                }
              }
            }
          }
        }
        updateLinks(select.value);
        select.addEventListener("input", function(){
          updateLinks(this.value);
        })
      });
    </script>
  </body>
</html>
